# ========================================
# Dockerfile Frontend - Desarrollo
# Madres Digitales
# ========================================

FROM ghcr.io/cirruslabs/flutter:3.19.6-stable

# Variables de entorno para desarrollo
ENV FLUTTER_WEB_USE_SKIA=true
ENV FLUTTER_WEB_CANVASKIT=true

WORKDIR /app

# Copiar archivos de dependencias
COPY pubspec.yaml pubspec.lock ./

# Instalar dependencias
RUN flutter pub get

# Copiar c√≥digo fuente
COPY . .

# Exponer puerto
EXPOSE 3008

# Health check
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
    CMD curl -f http://localhost:3008 || exit 1

# Iniciar servidor de desarrollo
CMD ["flutter", "run", "-d", "web", "--web-port", "3008", "--web-hostname", "0.0.0.0"]